<Window x:Class="Ana.View.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:sys="clr-namespace:System;assembly=mscorlib"
        xmlns:sysWindows="clr-namespace:System.Windows;assembly=PresentationCore"
        
        DataContext="{Binding MainViewModel, Source={StaticResource ViewModelLocator}}"
        xmlns:avalonDock="http://schemas.xceed.com/wpf/xaml/avalondock"
        xmlns:shell="clr-namespace:Microsoft.Windows.Shell;assembly=AvalonDock"
        xmlns:local="clr-namespace:Ana.Source.Docking"
        xmlns:view="clr-namespace:Ana.View"
        Title="Anathena" Height="640" Width="512">
    <Window.Resources>
        <avalonDock:BoolToVisibilityConverter x:Key="BoolToVisibilityConverter"/>
    </Window.Resources>
    <Grid>
        <Grid.RowDefinitions>
            <!-- Menu Bar Row -->
            <RowDefinition Height="Auto"/>
            <!-- Docking Panel Row -->
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Menu Bar -->
        <Grid Grid.Row="0">
            <Menu>
                <MenuItem Header="File">
                </MenuItem>
                <MenuItem Header="Edit" DataContext="{Binding Source={StaticResource ViewModelLocator}}">
                    <MenuItem Header="Settings" IsChecked="{Binding SettingsViewModel.IsVisible, Mode=TwoWay}" IsCheckable="True"/>
                </MenuItem>
                <MenuItem Header="Tools" DataContext="{Binding Source={StaticResource ViewModelLocator}}">
                    <MenuItem Header="Cheat Browser" IsChecked="{Binding CheatBrowserViewModel.IsVisible, Mode=TwoWay}" IsCheckable="True"/>
                    <MenuItem Header="Process Selector" IsChecked="{Binding ProcessSelectorViewModel.IsVisible, Mode=TwoWay}" IsCheckable="True"/>
                    <MenuItem Header="Project Explorer" IsChecked="{Binding ProjectExplorerViewModel.IsVisible, Mode=TwoWay}" IsCheckable="True"/>
                    <MenuItem Header="Scans">
                        <MenuItem Header="Change Counter" IsChecked="{Binding ChangeCounterViewModel.IsVisible, Mode=TwoWay}" IsCheckable="True"/>
                        <MenuItem Header="Manual Scanner" IsChecked="{Binding ManualScannerViewModel.IsVisible, Mode=TwoWay}" IsCheckable="True"/>
                        <MenuItem Header="Label Thresholder" IsChecked="{Binding LabelThresholderViewModel.IsVisible, Mode=TwoWay}" IsCheckable="True"/>
                    </MenuItem>
                    <MenuItem Header="Property Viewer" IsChecked="{Binding PropertyViewerViewModel.IsVisible, Mode=TwoWay}" IsCheckable="True"/>
                    <MenuItem Header="Results" IsChecked="{Binding ScanResultsViewModel.IsVisible, Mode=TwoWay}" IsCheckable="True"/>
                    <MenuItem Header="Snapshot Manager" IsChecked="{Binding SnapshotManagerViewModel.IsVisible, Mode=TwoWay}" IsCheckable="True"/>
                    <MenuItem Header=".Net Explorer" IsChecked="{Binding DotNetExplorerViewModel.IsVisible, Mode=TwoWay}" IsCheckable="True"/>
                </MenuItem>
            </Menu>
        </Grid>

        <!-- Docking Panel AnchorablesSource="{Binding Tools}"-->
        <avalonDock:DockingManager x:Name="dockManager"
                                   AnchorablesSource="{Binding Tools}" 
                                   Grid.Row="1">
            <!-- Theme -->
            <avalonDock:DockingManager.Theme>
                <avalonDock:ExpressionDarkTheme/>
            </avalonDock:DockingManager.Theme>
            
            <!-- All Dockable Windows -->
            <avalonDock:DockingManager.LayoutItemTemplateSelector>
                <local:PanesTemplateSelector>
                    <!-- Process Selector -->
                    <local:PanesTemplateSelector.ProcessSelectorViewTemplate>
                        <DataTemplate>
                            <view:ProcessSelector/>
                        </DataTemplate>
                    </local:PanesTemplateSelector.ProcessSelectorViewTemplate>
                    <!-- Change Counter -->
                    <local:PanesTemplateSelector.ChangeCounterViewTemplate>
                        <DataTemplate>
                            <view:ChangeCounter/>
                        </DataTemplate>
                    </local:PanesTemplateSelector.ChangeCounterViewTemplate>
                    <!-- Label Thresholder -->
                    <local:PanesTemplateSelector.LabelThresholderViewTemplate>
                        <DataTemplate>
                            <view:LabelThresholder/>
                        </DataTemplate>
                    </local:PanesTemplateSelector.LabelThresholderViewTemplate>
                    <!-- Manual Scanner -->
                    <local:PanesTemplateSelector.ManualScannerViewTemplate>
                        <DataTemplate>
                            <view:ManualScanner/>
                        </DataTemplate>
                    </local:PanesTemplateSelector.ManualScannerViewTemplate>
                    <!-- Snapshot Manager -->
                    <local:PanesTemplateSelector.SnapshotManagerViewTemplate>
                        <DataTemplate>
                            <view:SnapshotManager/>
                        </DataTemplate>
                    </local:PanesTemplateSelector.SnapshotManagerViewTemplate>
                    <!-- Scan Results -->
                    <local:PanesTemplateSelector.ScanResultsViewTemplate>
                        <DataTemplate>
                            <view:ScanResults/>
                        </DataTemplate>
                    </local:PanesTemplateSelector.ScanResultsViewTemplate>
                    <!-- Cheat Browser -->
                    <local:PanesTemplateSelector.CheatBrowserViewTemplate>
                        <DataTemplate>
                            <view:CheatBrowser/>
                        </DataTemplate>
                    </local:PanesTemplateSelector.CheatBrowserViewTemplate>
                    <!-- .Net Explorer -->
                    <local:PanesTemplateSelector.DotNetExplorerViewTemplate>
                        <DataTemplate>
                            <view:DotNetExplorer/>
                        </DataTemplate>
                    </local:PanesTemplateSelector.DotNetExplorerViewTemplate>
                    <!-- Property Viewer -->
                    <local:PanesTemplateSelector.PropertyViewerViewTemplate>
                        <DataTemplate>
                            <view:PropertyViewer/>
                        </DataTemplate>
                    </local:PanesTemplateSelector.PropertyViewerViewTemplate>
                    <!-- Settings -->
                    <local:PanesTemplateSelector.SettingsViewTemplate>
                        <DataTemplate>
                            <view:Settings/>
                        </DataTemplate>
                    </local:PanesTemplateSelector.SettingsViewTemplate>
                    <!-- Project Explorer -->
                    <local:PanesTemplateSelector.ProjectExplorerViewTemplate>
                        <DataTemplate>
                            <view:ProjectExplorer/>
                        </DataTemplate>
                    </local:PanesTemplateSelector.ProjectExplorerViewTemplate>
                </local:PanesTemplateSelector>
            </avalonDock:DockingManager.LayoutItemTemplateSelector>

            <!-- Container Style -->
            <avalonDock:DockingManager.LayoutItemContainerStyleSelector>
                <local:PanesStyleSelector>
                    <!-- General Docking Tools Style -->
                    <local:PanesStyleSelector.ToolStyle>
                        <Style TargetType="{x:Type avalonDock:LayoutAnchorableItem}">
                            <Setter Property="Title" Value="{Binding Model.Title}"/>
                            <Setter Property="IconSource" Value="{Binding Model.IconSource}"/>
                            <Setter Property="Visibility" Value="{Binding Model.IsVisible, Mode=TwoWay, Converter={StaticResource BoolToVisibilityConverter}, ConverterParameter={x:Static Visibility.Hidden}}"/>
                            <Setter Property="ContentId" Value="{Binding Model.ContentId}"/>
                            <Setter Property="IsSelected" Value="{Binding Model.IsSelected, Mode=TwoWay}"/>
                            <Setter Property="IsActive" Value="{Binding Model.IsActive, Mode=TwoWay}"/>
                        </Style>
                    </local:PanesStyleSelector.ToolStyle>
                </local:PanesStyleSelector>
            </avalonDock:DockingManager.LayoutItemContainerStyleSelector>

            <!-- Layout Style -->
            <avalonDock:LayoutRoot>
                <!-- Docking Group for All Windows -->
                <avalonDock:LayoutPanel>
                    <avalonDock:LayoutAnchorablePaneGroup/>
                </avalonDock:LayoutPanel>
            </avalonDock:LayoutRoot>
        </avalonDock:DockingManager>
    </Grid>
</Window>
